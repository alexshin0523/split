<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>HTML Template</title>

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CVarela+Round" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="splash/css/bootstrap.min.css" />

	<!-- Owl Carousel -->
	<link type="text/css" rel="stylesheet" href="splash/css/owl.carousel.css" />
	<link type="text/css" rel="stylesheet" href="splash/css/owl.theme.default.css" />

	<!-- Magnific Popup -->
	<link type="text/css" rel="stylesheet" href="splash/css/magnific-popup.css" />

	<!-- Font Awesome Icon -->
	<link rel="stylesheet" href="splash/css/font-awesome.min.css">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="splash/css/style.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

<body align="center">
	<header id="home">
		<!-- Background Image -->
		<div class="bg-img" style="background-image: url('./splash/img/background1.jpg');">
			<div class="overlay"></div>
		</div>
		<!-- /Background Image -->

    <h2 style="color:white">Split: Create Your Account</h2>
    
    <form>
        <h2 style="color:white">Email:<br></h2><input type="text" name="useremail" id="useremail" axlength="50" style="width:auto;"/><br>
    </form>
    
    <form>
        <h2 style="color:white">Password:<br></h2><input type="password" name="userpw" id="userpw" maxlength="50" style="width:auto;"/><br>
    </form>

    <a><button onclick="createAccount()" class="white-btn" style="width:auto;">Create Account</button>
	<br>
	<h2 style="color:white">Or<br></h2>
	<a><button onclick="googleSignIn()" class="white-btn" style="width:auto;">Sign Up with Google</button>
	<br>
    <a href='index.html'><button class="main-btn" style="width:auto;">Back</button>
    
<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase.js"></script>
<script src="./main.js"></script>
<script>

    // TODO: Replace the following with your app's Firebase project configuration
    // var firebaseConfig = {
    //     apiKey: "AIzaSyAzE7sVPreEJK2dI_BTMTUVntz1E_O0wK0",
	// 	authDomain: "cs180-split.firebaseapp.com",
	// 	databaseURL: "https://cs180-split.firebaseio.com",
	// 	projectId: "cs180-split",
	// 	storageBucket: "cs180-split.appspot.com",
	// 	messagingSenderId: "638604999532"
    //   };
    // // Initialize Firebase
    //   firebase.initializeApp(firebaseConfig);

	//Sign in with a Google account.
 	googleSignIn=()=>{
    	base_provider = new firebase.auth.GoogleAuthProvider()
    	firebase.auth().signInWithPopup(base_provider).then(function(result){
     	 console.log(result)
      	console.log("Success, Google Account Linked")
    	}).catch(function(err) {
     		 console.log(err)
     		 console.log("Failed to link google account")
			  alert(err);
    	})
    }
 </script>



<script>
	function createAccount(){
    console.log("Account Create Clicked"); 
    var userpw = document.getElementById("userpw").value;
    var useremail = document.getElementById("useremail").value;    
    if(!useremail || !userpw){
        var message = "";
        if(!useremail) message += "Email field is empty.\n"; 
        if(!userpw) message += "Password is empty.\n"; 
        alert("" + message);
    }    
    saveUser(useremail);
	  firebase.auth().createUserWithEmailAndPassword(useremail, userpw).catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      console.log(error);
      alert(error);
    });
	}
</script>

	<!--Waits for a change in the user variable. Once you log in, the user variable is populated-->
<script>
    firebase.auth().onAuthStateChanged(user => {
        if(user) {
            window.location = 'dashboard.html'; //After successful login, user will be redirected to dashboard
        }
    });
</script>


</body>
</html>
